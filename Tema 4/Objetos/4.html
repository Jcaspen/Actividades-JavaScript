<!DOCTYPE html>
<html lang="es" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Actividad 4</title>
    </head>
    <body>
        <script type="text/javascript">
            function Factura(cliente,elementos,info) {
                this.cliente=cliente;
                this.elementos=elementos;
                this.info=info;
            }

            function Cliente(nombre,direccion,telefono,nif) {
                this.nombre=nombre;
                this.direccion=direccion;
                this.telefono=telefono;
                this.nif=nif;
            }

            function Elemento(descripcion,cantidad,precio) {
                this.descripcion=descripcion;
                this.cantidad=cantidad;
                this.precio=precio;
            }

            function Info(baseImp=0,iva=21, total=0,formaDePago="contado") {
                this.baseImp=baseImp;
                this.iva=iva;
                this.total=total;
                this.formaDePago=formaDePago;
            }

            function Empresa(nombre,direccion,telefono,cif) {
                this.nombre=nombre;
                this.direccion=direccion;
                this.telefono=telefono;
                this.cif=cif;
            }

            Factura.prototype.empresa = new Empresa("Reventao SL","Av/del iesdonana",856948372,"85987654G");
            Factura.prototype.calcularTotal= function(){

                for (var i = 0; i < this.elementos.length; i++) {
                    this.info.baseImp+=this.elementos[i].cantidad*this.elementos[i].precio;
                }
                this.info.total=(this.info.baseImp*((this.info.iva/100)+1)).toFixed(2);
            };

            var c=new Cliente("Castillo","Perico","76587656","76589876F");
            var i=new Info(1,21);
            var e=[new Elemento("Aceitunas",10,10), new Elemento("teclado",2,20)];

            var f= new Factura(c,e,i);

            Factura.prototype.cuantoEs=function(factura){
                factura.calcularTotal();
                alert(this.info.total);
            };
            f.cuantoEs(f);

        </script>
    </body>
</html>
